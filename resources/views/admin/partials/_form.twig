{% set formbuilder=app('form') %}
{% set htmlbuilder=app('html') %}
{{ formbuilder.open(form|merge({'class':'form--hor'}))|raw }}
{% if token is not null %}
    {{ formbuilder.token()|raw }}
{% endif %}    
{% for hidden in hiddens %}
    {{ hidden|raw }}
{% endfor %}    
{% if fieldsets|length>0 %} 
    <fieldset>
        <legend></legend>
        <div class="form-block">
            <div class="col-group">
                <div class="col-mb-4 col-3 col-dt-2 col-ld-2">
                    <label class="form-block__name">
                        {{ trans('Check/Uncheck All') }}
                    </label>
                </div>
                <div class="col-mb-16 col-18 col-dt-10 col-ld-4">
                    <div class="input-field input-field--short">
                        <input data-icheck="true" type="checkbox" class="test-checkboxes" />
                    </div>
                </div>        
            </div>
        </div>
    </fieldset>
    {% for fieldset in fieldsets %}
        <fieldset{{ htmlbuilder.attributes(fieldset.attributes) }}>
            {% if (fieldset.name is not null) and (fieldset.name is not empty)  %}    
                <legend>{{ fieldset.name }}</legend>
            {% endif %}                     
            {% for control in fieldset.controls() %}                                                    
                <div class="form-block">                    
                    {{ control.getField(row, control, [])|raw }}                               
                    {#{% include 'antares/foundation::layouts.antares.partials.form.vertical._'~control.type|replace({':': '_'}) with {control: control} %}#}
                </div>
            {% endfor %}  
        </fieldset>        
    {% endfor %}  
    <div class="app-content__footer">
        <div class="btn-group">
            <button type="submit" class="btn btn--md btn--primary mdl-button mdl-js-button mdl-js-ripple-effect">
                {{ submit|raw }}
            </button>
            <button type="button" class="btn btn--md btn--default mdl-button mdl-js-button mdl-js-ripple-effect cancel-request" disabled="disabled">
                {{ trans("Cancel testing") }}
            </button>
        </div>
    </div>
{% else %}
    <div class="alert alert--bg alert--glow alert--warning alert--lg alert--border">                            
        <i class="zmdi zmdi-alert-triangle"></i>
        <span>
            <strong>{{ trans('Warning') }}!</strong> 
            {{ trans('There are no modules with testing enabled.') }}
        </span>
    </div>
{% endif %}    
{{ formbuilder.close()|raw }}
